{% extends 'sito/base.html' %}


{% block content %}
<div style="width:100%;">
  <div id="graph" style="border: solid 1px black; width:100%; height:600px"></div>
  <div id="data" style="width:18%; padding:1%;float:left;">
    <div id="caption">Community - Questa DIV visualizza i dati delle varie immagini</div>
  </div>

</div>
{% endblock %}


{% block bottom_script %}
<script src="/static/sito/js/lodash.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gojs/1.8.32/go-debug.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/gojs/1.8.32/go.js"></script> -->
<script src="/static/sito/js/dati.js"></script>
<script src="/static/sito/js/HyperlinkText.js"></script>

<script type="text/javascript">  

var make = go.GraphObject.make;
var myDiagram = make(go.Diagram, "graph");

myDiagram.nodeTemplate =
    make(go.Node, "Auto", 
    { // when the user clicks on a Node, highlight all Links coming out of the node
        // and all of the Nodes at the other ends of those Links.
        click: function(e, node) {
            // highlight all Links and Nodes coming out of a given Node
            console.log(node.data.key);
            path = node.data.key;
            path = path.replace(/\s+/g, '').toLowerCase();
            document.location.href = path;
          }
      },

      make(go.Shape,
        { figure: "Circle", fill: "white" },  // default Shape.fill value
        new go.Binding("fill", "color")),  // binding to get fill from nodedata.color
      make(go.TextBlock,
        { margin: 5 },
        new go.Binding("text", "key")),  // binding to get TextBlock.text from nodedata.key
    );

  var nodeDataArray = [
    { key: "FollowerA", color: "lightblue" },  // note extra property for each node data: color
    { key: "FollowerB", color: "lightblue" },
    { key: "Summer Elegance", color: "pink" },
    { key: "Food Blogger", color: "pink" },
    { key: "Fashionista", color: "pink" }
  ];

  myDiagram.linkTemplate =
    make(go.Link,
      { curve: go.Link.Bezier },  // Bezier curve
      make(go.Shape)
    );

  var linkDataArray = [
    { from: "FollowerA", to: "Summer Elegance" },
    { from: "FollowerA", to: "Fashionista" },
    { from: "FollowerB", to: "Fashionista" },
    { from: "FollowerB", to: "Food Blogger" }
  ];

  myDiagram.model = new go.GraphLinksModel(nodeDataArray, linkDataArray);


</script>
{% endblock %}
